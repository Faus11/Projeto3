<div class="theme">
  <cmdk-command #cmdkCommand (keydown)="onKeyDown($event)" [ngStyle]="{'transform': styleTransform}" [loop]="true"
                [loading]="loading" [filter]="filter">
    <div>
      <div *ngFor="let p of pages" class="cmdk-vercel-badge">
        {{ p }}
      </div>
    </div>
    <input
      cmdkInput
      autofocus
      placeholder="What do you need?"
      (change)="setInputValue($event)"
    />
    <cmdk-list class="{{loading ? 'loading' : ''}}">
      <div *ngIf="loading" class="cmdk-loading">{{ loadingMsg }}</div>
      <div *cmdkEmpty>{{ emptyMsg }}</div>

      <button cmdkItem (click)="goToHomePage()">
        <i class="ph ph-arrow-circle-left"></i> Back
      </button>

      <div class="cmdk-list-pages">
        <ng-container *ngIf="activePage === 'home'">
          <cmdk-group [label]="group.group" *ngFor="let group of groups">
            <ng-container *ngFor="let item of group.items">
              <cmdk-separator *ngIf="item.separatorOnTop"></cmdk-separator>
              <button
                cmdkItem
                [value]="item.label"
                (selected)="item.itemSelected && item.itemSelected()"
              >
                <!--                <ng-container *dynamicView="item.icon"></ng-container>-->
                <i class="ph {{item.icon}}"></i>
                {{ item.label }}
                <div class="cmdk-vercel-shortcuts" *ngIf="item.shortcut">
                  <kbd *ngFor="let key of item.shortcut.split(' ')">{{ key }}</kbd>
                </div>
              </button>
            </ng-container>
          </cmdk-group>
        </ng-container>
        <ng-container *ngIf="activePage === 'tasks'">

          
          <button
            cmdkItem
            *ngFor="let item of tasksList; let i = index"
            [value]="item"
            (click)="searchTask(item)"
          >
            {{ item }}
          </button>
        </ng-container>
        <ng-container *ngIf="activePage === 'Task Detail'">
          <div class="task-detail">
            <span>Task detail</span>
            <span>{{ currentTask }}</span>
          </div>
        </ng-container>
      </div>
    </cmdk-list>
  </cmdk-command>
</div>
